<%= render 'form_immagine' %>

<script>

  $( "form" ).submit( function(e) {
    $.ajax( {
      url: $(this).attr("action"),
      type: 'POST',
      data: new FormData( this ),
      processData: false,
      contentType: false,
      success: function(data) {
        // chiudiamo la finestra modale
        $("#finestra_modale").foundation('close');

        // sostituiamo la riga modificata
        $('#row<%= @row.id %>').replaceWith( data ); // escape_javascript render(@row)
        // $('#row<%= @row.id %>').foundation();
        $(document).foundation();
        Foundation.reInit($(document));
      }
    } );
    e.preventDefault();
  } );

</script>